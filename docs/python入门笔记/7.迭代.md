# 迭代

迭代，简单说就是指重复去运行一部分代码。



## 再赋值

对同一个变量可以多次进行赋值。一次新的赋值使得已有的变量获得新的值（旧值就会被覆盖）。

```python
>>> x = 5
>>> x
5
>>> x = 7
>>> x
7
```

Python使用单等号（=）来赋值，所以有的人会以为像a=b这样的语句就如同数学上的表达式一样来表达两者相等，这种想法是错误的。

对变量进行再赋值总是很有用的，但在用的时候要做好备注和提示。如果变量的值频繁变化，就可能让代码难以阅读和调试。



## 更新变量

最常见的一种再赋值就是对变量进行更新，新的值是在旧值的基础上进行修改得到的。

```python
x = 7
x = x * 7
```

上面语句的意思是，获取x当前的值，在此基础上乘以7，然后把结果作为新值赋给x。

但是如果对不存在的变量进行更新，就会得到错误了，因为Python要先进行等号右边的运算，然后才能赋值给x。

```python
>>> y = y + 1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'y' is not defined
```



## 循环：while语句

在计算机程序里面，重复操作也被叫做迭代。

使用while语句

```python
def countdown(n):
    while n > 0:
        print(n)
        n = n - 1
    print('Wonderful!')

countdown(10)
```

while循环读起来比较容易，几乎就像英语一样。这个函数的意思是：当n大于0，就输出n的值，然后对n减1，到n等于0的时候，就输出单词Wonderful！



while循环语句的执行流程：

- 判断循环条件的真假；

- 如果是假的，退出while语句，继续运行后面的语句；

- 如果条件为真，执行循环体，然后再调回到第一步；

这种类型的运行流程叫做循环，因为第三步会循环到第一步。循环体内要改变一个或者更多变量的值，这样循环条件才能变成假，然后循环才能终止。

否则的话，条件不能为假，循环不能停止，这就叫做无限循环。

```python
def sequence(n):
    while n != 1:
        print(n)
        if n % 2 == 0:   # n is even
            n = n / 2
        else:    # n is odd
            n = n * 3 + 1
```

这个循环的判断条件是n不等于1，所以循环一直进行，直到n等于1，条件为假，就不再循环了。

每次循环的时候，程序都输出n的值，然后检查一下是偶数还是奇数。如果是偶数，就把n除以2。如果是奇数，就把n替换为n乘以3再加1的值。比如让函数用3做参数，也就是sequence(3)，得到的n的值就依次为：

```python
>>> sequence(3)
3
10
5
16
8
4
2
```

有时候n在增加，有时候n在降低，所以没有明显证据表明n最终会到1而程序停止。对于一些特定的n值，我们能够确保循环的终止。

真正的难题是，我们能否证明这个程序对任意正数的n值都能终止循环。目前为止，没有人能够证明或者否定这个命题。



## 中断

有时候需要终止循环，这时候就可以用到break语句来跳出循环。

比如让用户输入一些内容，当输入done的时候就结束，实现方法如下：

```python
while True:
    line = input('> ')
    if line == 'done':
        print('over')
        break
    print(line,' Done!')
```

循环条件就是true，意味条件总是真的，所以循环就一直进行，一直到触发了break语句才跳出。

每次循环的时候，程序都会有一个大于号>来提示用户。如果输入了done，break语句就会让程序跳出循环。否则的话程序会重复用户输入的内容，然后回到循环的头部。简单的运行例子如下：

```python
> hello
hello  Done!
> world
world  Done!
> python
python  Done!
> done
done
```

这种while循环的写法很常见，因为这样你可以在循环的任何一个部位对条件进行检测，而不仅仅是循环的头部，你可以确定地表达循环停止的条件，而不是消极的暗示【程序会一直运行，直到某种情况】。



## 平方根

循环经常被用于进行数值运算的程序中，这种程序往往是有一个近似值作为初始值，然后逐渐迭代去改进以接近真实值。

用牛顿法来计算平方根。假如想要知道一个数a的平方根。你用任意一个估计值x来开始，你可以用下面的公式获得一个更接近的值。

```shell
y = (x + a / x) / 2
```

比如，如果a是3，x设为3，如下：

```python
>>> a = 4
>>> x = 3
>>> y = (x + a / x) / 2
>>> yy
2.1666666666666665
```

如果我们用这个结果做新的估计值来重复这个操作，结果就更加接近了：

```python
>>> x = y
>>> y = (x + a/x)/2
>>> y
2.0064102564102564
```

一般情况下，我们不能提前知道到达正确结果需要多长时间，但是当估计值不再有明显变化的时候，结果就基本准确了：

```python
a = 4 
x = 6
while True:
    print(x)
    y = (x + a / x) / 2
    if y == x:
        break
    x = y

```

一般来讲用浮点数来测试等式是很危险的。浮点数的值只能是近似正确：大多数的有理数，比如1/3，以及无理数，比如根号2，都不能用浮点数来准确表达。

相比之下，与其对比x和y是否精确相等，倒不如内置的绝对值函数来计算一下差值的绝对值靠谱。

```python
a = 4
x = 3
epsilon = 0.0000000001
while True:
    print(x)
    y = (x + a / x) / 2
    # if y == x:
    #     break
    if abs(y - x) < epsilon:
        break
    x = y
```



## 算法

牛顿法是算法的一个例子：通过一系列机械的步骤来解决一类问题。

当你学个位数字乘法的时候，你可能要背下来整个乘法表，这种知识就不是算法。

但如果你很懒，你就可能会有一些小技巧。比如找到一个n与9的乘法，你可以把n-1写成第一位，10-n写成第二位。这个技巧是应对任何个位数字乘以9的算式，这就是一个算法。

执行算法是很无聊的，但是设计算法很有趣，是智力上的一种挑战，也是计算机科学的核心部分。

有些事情做起来很简单，甚至都不用思考，这些事情往往最难用算法来表达，比如理解自然语言。人工智能、语音识别、语义理解



## 调试

对折调试是一种节省调试时间的方法。

（二分法）



## 部分术语列表

- 初始化：给一个变量初始值，以便于后续进行更新。

- 迭代：重复执行一系列语句，使用递归函数调用的方式，或者循环的方式。

- 算法：解决某一类问题的一系列通用的步骤。



**重要的事情说三遍：练习！练习！练习！**

